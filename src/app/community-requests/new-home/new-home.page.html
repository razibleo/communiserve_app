<ion-header >
  <ion-toolbar color='primary'>
    <ion-buttons>
      <ion-menu-button menu="first"></ion-menu-button>
      <ion-title>Welcome</ion-title>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content style='height: 100%; position: relative;'>

  
    <ion-fab vertical="bottom" horizontal="end" slot="fixed" style='margin-right: 5%; margin-bottom: 5%'>
      <ion-fab-button (click)='addRequest()'>
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    
    <div style='position: relative; top: 50%; transform: translateY(-50%);' class='ion-text-center' *ngIf='isLoading'><ion-spinner color='primary'></ion-spinner></div>
    
    <ion-grid class='ion-padding' style='position: relative; top: 50%; transform: translateY(-50%);' *ngIf='!isLoading'>
      <ion-row class="ion-align-items-center" > 
        <ion-col>
          <div style='position: relative; overflow: auto;'>
            <ion-row>
              <ion-col>
                <h1 style='float:left; margin:0; font-weight: bold;'>Nearby Requests:</h1>
                <ion-button fill='clear' style='float:right; margin:0; padding:1px' [routerLink]="['/community-requests/home/nearby-requests']">See All</ion-button>
              </ion-col>
            </ion-row>
          
          </div>
          <div style='clear: both;' class="scrolling-wrapper-flexbox" >
            <div class="card" *ngFor='let nearbyUser of nearByUsers'>
               
              <ion-card (click) ='onClickNearbyUser(nearbyUser.user)' class='ion-text center' style='border: 1px solid var(--ion-color-primary);' > 
                <ion-card-header class='ion-margin'>
                  <ion-card-title><b>{{nearbyUser.user.username}}</b></ion-card-title>
                  <ion-card-subtitle>
                    {{nearbyUser.distance}} KM Away<br>
                  </ion-card-subtitle>
                  <ion-avatar style='border: 2px solid orange; margin:0 auto; margin-top: 5%;'> 
                    <img [src]='nearbyUser.user.photoURL'>
                  </ion-avatar>
                  <ion-card-content class='ion-padding'>
                    <b>Requests Available: {{getAvailableRequests(nearbyUser)}}</b><br>
                  </ion-card-content>
                  <!-- <ion-button color = "primary" fill="clear"
                  [routerLink] ="['/your-requests/your-requests-detail', i]">More</ion-button> -->
                </ion-card-header>
              </ion-card>         


            </div>
          </div>
          
           

        </ion-col>
      </ion-row>
    </ion-grid>

   
     
   
</ion-content>


